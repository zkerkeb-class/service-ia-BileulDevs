{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.identifyCar (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:49:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-15 19:11:28"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{ \"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{ \"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.identifyCar (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:49:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-15 19:17:12"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token 'J', \"Je ne peux\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token 'J', \"Je ne peux\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.identifyCar (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:49:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-15 19:17:35"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.identifyCar (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:49:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-15 19:17:57"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:33:36"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:33:58"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:34:16"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:34:46"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:35:03"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:35:31"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:35:36"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:35:50"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:36:10"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:36:21"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 15:36:42"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:02:08"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:182:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:03:25"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:184:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:04:02"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:184:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:06:01"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:184:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:06:23"}
{"level":"error","message":"Erreur de parsing JSON: Unexpected token '`', \"```json\n{\n\"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '`', \"```json\n{\n\"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:184:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:06:39"}
{"level":"error","message":"Erreur dans validatePost: SON is not defined","service":"ai-service","stack":"ReferenceError: SON is not defined\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:181:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-05-23 16:07:02"}
{"level":"error","message":"Erreur dans validatePost: Unexpected token '<', \"<!DOCTYPE \"... is not valid JSON","service":"ai-service","stack":"SyntaxError: Unexpected token '<', \"<!DOCTYPE \"... is not valid JSON\n    at JSON.parse (<anonymous>)\n    at parseJSONFromBytes (node:internal/deps/undici/undici:5731:19)\n    at successSteps (node:internal/deps/undici/undici:5712:27)\n    at fullyReadBody (node:internal/deps/undici/undici:4609:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async consumeBody (node:internal/deps/undici/undici:5721:7)\n    at async exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:208:23)","timestamp":"2025-05-23 16:09:18"}
{"error":"Post validation failed: user: Path `user` is required.","level":"error","message":"Erreur lors de la création du post en BDD","service":"ai-service","timestamp":"2025-05-23 16:09:52"}
{"level":"error","message":"Erreur dans validatePost: cloudinary is not defined","service":"ai-service","stack":"ReferenceError: cloudinary is not defined\n    at C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:113:22\n    at Array.map (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:112:53)\n    at Layer.handle [as handle_request] (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at done (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\multer\\lib\\make-middleware.js:157:11\n    at WriteStream.<anonymous> (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\multer\\storage\\disk.js:43:9)\n    at WriteStream.emit (node:events:536:35)","timestamp":"2025-05-23 16:13:20"}
{"level":"error","message":"Erreur dans validatePost: Must supply api_key","service":"ai-service","stack":"Error: Must supply api_key\n    at ensureOption (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\ensureOption.js:19:13)\n    at Object.sign_request (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1164:16)\n    at Object.process_request_params (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1214:22)\n    at call_api (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\uploader.js:474:18)\n    at Object.upload (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\uploader.js:53:10)\n    at Object.upload (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1411:21)\n    at C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:114:48\n    at Array.map (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:113:53)\n    at Layer.handle [as handle_request] (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-05-23 16:13:40"}
{"level":"error","message":"Erreur dans validatePost: Must supply api_key","service":"ai-service","stack":"Error: Must supply api_key\n    at ensureOption (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\ensureOption.js:19:13)\n    at Object.sign_request (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1164:16)\n    at Object.process_request_params (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1214:22)\n    at call_api (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\uploader.js:474:18)\n    at Object.upload (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\uploader.js:53:10)\n    at Object.upload (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1411:21)\n    at C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:114:48\n    at Array.map (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:113:53)\n    at Layer.handle [as handle_request] (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-05-23 16:14:09"}
{"level":"error","message":"Erreur dans validatePost: Must supply api_key","service":"ai-service","stack":"Error: Must supply api_key\n    at ensureOption (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\ensureOption.js:19:13)\n    at Object.sign_request (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1164:16)\n    at Object.process_request_params (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1214:22)\n    at call_api (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\uploader.js:474:18)\n    at Object.upload (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\uploader.js:53:10)\n    at Object.upload (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\cloudinary\\lib\\utils\\index.js:1411:21)\n    at C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:114:48\n    at Array.map (<anonymous>)\n    at exports.validatePost (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\identify.controller.js:113:53)\n    at Layer.handle [as handle_request] (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\node_modules\\express\\lib\\router\\layer.js:95:5)","timestamp":"2025-05-23 16:14:45"}
{"error":"Post validation failed: user: Path `user` is required.","level":"error","message":"Erreur BDD:","service":"ai-service","timestamp":"2025-05-23 16:15:17"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:28:52"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:29:32"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:30:19"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:30:40"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:31:17"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:32:47"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:33:02"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:33:50"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:35:22"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:38:25"}
{"error":"Cannot read properties of undefined (reading 'id')","level":"error","message":"Erreur BDD:","service":"ai-service","timestamp":"2025-05-23 16:43:47"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:53:06"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:54:24"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 16:55:10"}
{"error":"Token manquant ou invalide.","level":"error","message":"Erreur BDD:","service":"ai-service","success":false,"timestamp":"2025-05-23 18:47:26"}
{"level":"error","message":"Erreur dans validateData: Réponse GPT invalide","service":"ai-service","stack":"Error: Réponse GPT invalide\n    at exports.validateData (C:\\Users\\bsahr\\Documents\\Github\\SpotR\\spotR-ai\\controllers\\validate.controller.js:234:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-07-06 12:43:04"}
